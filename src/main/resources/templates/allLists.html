<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns:th="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/html"
      xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <title>Messages</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" href="/style/style.css">
</head>
<body>

<div th:switch = "${#root}" class="left_block" >

    <p th:case = "messages">
    <table th:if="${messages}" class="table table-striped table-hover ">
        <thead class="table-dark">
            <tr>
                <th scope="col">Message Id</th>
                <th scope="col">Description</th>
                <th scope="col">Classification</th>
                <th scope="col">Priority</th>
                <th scope="colgroup">User</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody th:each="message : ${messages}">
            <tr>
                <td th:text="${message.getId}"></td>
                <td th:text="${message.getDescription}"></td>
                <td th:text="${message.getType.getDescription}"></td>
                <td th:text="${message.getPriority.getDescription}"></td>
                <td>
                    <span th:text="${message.getUser.getFirst_name}"></span>
                    <span th:text="${message.getUser.getLast_name}"></span>
                </td>
                <td>
                    <button th:onclick="window.location.href = '/workplace/details/[[${message.getId}]]';" type="button">Details</button>
                    <button th:method="delete" th:if="${message.getActual}" sec:authorize="hasRole('ADMIN')" th:onclick="window.location.href = '/admin/delete/message/[[${message.getId}]]';" type="button">Delete</button>
                    <button sec:authorize="hasRole('SUPPORT')" th:if="${message.getSupport_id} eq 0" th:onclick="window.location.href = '/support/apply/[[${message.getId}]]';" type="button">Apply</button>
                    <button sec:authorize="hasRole('SUPPORT')" th:unless="${message.getSupport_id} eq 0" th:onclick="window.location.href = '/support/complete/[[${message.getId}]]';" type="button">Complete</button>
                </td>

            </tr>
        </tbody>

    </table>



    <p th:case="users">
        <p th:if="${users}">
            <button th:onclick="window.location.href = '/admin/form/user';" type="button">New User</button>

        <table th:if="${users}" class="table table-striped table-hover">
            <thead class="table-dark">
            <tr>
                <th scope="col">User Id</th>
                <th scope="col">Имя</th>
                <th scope="col">Фамилия</th>
                <th scope="col">Логин</th>
                <th scope="col">Actions</th>
            </tr>
            </thead>
            <tbody th:each="message : ${users}">
                <tr>
                    <td th:text="${message.getId}"></td>
                    <td th:text="${message.getFirst_name}"></td>
                    <td th:text="${message.getLast_name}"></td>
                    <td th:text="${message.getUsername}"></td>
                    <td>
                        <button th:method="delete" sec:authorize="hasRole('ADMIN')" th:onclick="window.location.href = '/admin/delete/user/[[${message.getId}]]';" type="button">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>


<!--ggh-->
    <p th:case="types">

        <p th:if="${types}">
            <button th:onclick="window.location.href = '/admin/form/type';" type="button">New Type</button>

        <table th:if="${types}" class="table table-striped table-hover">
            <thead class="table-dark">
            <tr>
                <th scope="col">Type Id</th>
                <th scope="col">Description</th>
                <th scope="col">Actions</th>
            </tr>
            </thead>
            <tbody th:each="message : ${types}">
                <tr>
                    <td th:text="${message.getId}"></td>
                    <td th:text="${message.getDescription}"></td>
                    <td>
                        <button th:onclick="window.location.href = '/admin/delete/type/[[${message.getId}]]';" type="button">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>


    <p th:case="priorities">

        <p th:if="${priorities}">
            <button th:onclick="window.location.href = '/admin/form/priority';" type="button">New Priority</button>

        <table th:if="${priorities}" class="table table-striped table-hover">
            <thead class="table-dark">
            <tr>
                <th scope="col">Priority Id</th>
                <th scope="col">Description</th>
                <th scope="col">Actions</th>
            </tr>
            </thead>
            <tbody th:each="message : ${priorities}">
            <tr>
                <td th:text="${message.getId}"></td>
                <td th:text="${message.getDescription}"></td>
                <td>
                    <button th:method="delete" th:onclick="window.location.href = '/admin/delete/priority/[[${message.getId}]]';" type="button">Delete</button>
                </td>
            </tr>
            </tbody>
        </table>



    <p th:case="roles">

        <table th:if="${roles}" class="table table-striped table-hover">
            <thead class="table-dark">
            <tr>
                <th scope="col">Priority Id</th>
                <th scope="col">Description</th>
            </tr>
            </thead>
            <tbody th:each="message : ${roles}">
            <tr>
                <td th:text="${message.getId}"></td>
                <td th:text="${message.getRole}"></td>
            </tr>
            </tbody>
        </table>





</div>
<!--suppress RequiredAttributes -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
</body>
</html>
